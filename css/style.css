/* Google Fonts */
@import url('https://fonts.googleapis.com/css2?family=Girassol&family=Stardos+Stencil:wght@400;700&family=Cinzel:wght@400;600;700&display=swap');

/* ---------- Tokens ---------- */
:root{
  --bg: #0b0e10;
  --ink: #e8e6e3;
  --ink-dim: #cfcac3;
  --stroke: #232831;

  --sidebar-top: #0d0f1a;
  --sidebar-bot: #0a0d12;

  --shadow: 0 10px 30px rgba(0,0,0,.45);
  --r2: 14px;

  --border: var(--stroke);
  --muted: var(--ink-dim);
}

/* ---------- Base ---------- */
*{ box-sizing:border-box }
html,body{
  margin:0; padding:0; background:var(--bg); color:var(--ink);
  font:18px/1.7 'Stardos Stencil', system-ui, serif;
}
a{ color:var(--ink); text-decoration:none }
a:hover{ text-decoration:underline }
img{ max-width:100%; display:block }
hr{ border:0; height:1px; background:var(--stroke) }

/* ---------- Titles ---------- */
.site-title{
  font-family:'Girassol', system-ui, serif;
  font-size: clamp(28px, 5vw, 46px);
  line-height:1.1; margin:0;
  text-shadow:0 0 .5px var(--ink), 0 0 24px rgba(0,0,0,.55);
}

/* ---------- Layout (desktop) ---------- */
.layout{
  display:block;
  min-height:100vh;
  padding-left:280px; /* reserve space for fixed sidebar */
}
/* keep the fixed sidebar layered above, main stays interactive */
.sidebar{ z-index:10; }
main{ position:relative; z-index:0; }

/* SIDEBAR (desktop): fixed, full-height – shell has NO border or bg */
.sidebar{
  position: fixed; left: 0; top: 0; bottom: 0; width: 280px;
  z-index: 10;
}

.sidebar-panel{
  height: 100%;
  overflow-y: auto;
  padding: 22px 18px 28px;

  /* background stays here so it slides with the panel */
  background:
    url('../img/sidebar-image.jpg') center top / 100% auto repeat-y,
    linear-gradient(180deg, rgba(16,18,22,0.38), rgba(10,12,16,0.45));
  background-blend-mode: multiply;

  /* MOVE these here (were on .sidebar) to remove the lingering line */
  border-right: 1px solid var(--stroke);
  box-shadow: inset 0 0 24px rgba(0,0,0,.35);
}



.sidebar nav h3{
  font-size:15px;               /* larger */
  color:var(--ink-dim);
  letter-spacing:.08em;
  margin:18px 0 10px;
}
.sidebar nav h3 small{
  font-size:.9em;
  color: var(--ink-dim);
  font-weight:400;
}

/* thin separator under the search box */
.sidebar .sidebar-sep{
  border:0;
  height:2px;                                    /* thicker */
  background: rgba(255,255,255,.9);               /* white */
  margin: 14px 0 12px;                            /* a touch more spacing */
  opacity: 1;
}

.sidebar nav ul{ list-style:none; margin:0; padding:0 }
.sidebar nav li{ margin:2px 0 }
.sidebar nav a, .sidebar .nav-parent{
  display:block; padding:5px 8px; border-radius:8px; border:1px dashed transparent;
}
.sidebar nav a:hover, .sidebar nav a:focus-visible, .sidebar .nav-parent:hover{
  border-color:var(--stroke); background:rgba(255,255,255,.03); outline:none;
}

/* Ensure submenu never shows bullets */
.sidebar .nav-submenu{ list-style:none !important; margin:4px 0 0 12px; padding:0 }
/* Hover-only submenu: parent is NOT a link */
.has-submenu > .nav-submenu{ display:none; }
.has-submenu:hover > .nav-submenu{ display:block }
.nav-parent{ cursor:default }

/* ---- Sidebar search ---- */
.sidebar-search{ margin:12px 0 10px; }
.sidebar-search input[type="search"]{
  width:100%; height:36px; padding:8px 10px;
  border-radius:10px; border:1px solid rgba(232,230,227,.70);
  background: rgba(0,0,0,.65);
  color: var(--ink); outline:none; backdrop-filter: blur(2px);
}
.sidebar-search input::placeholder{ color: rgba(232,230,227,.80); }
.sidebar-search input:focus{
  border-color:#fff; box-shadow:0 0 0 2px rgba(255,255,255,.18); background:rgba(0,0,0,.78);
}

/* No outer box around the "Currently listening" card in the sidebar */
.sidebar .anthem-card{
  border: 0 !important;
  background: transparent;
  padding: 0;
}

/* main column flex so back-link/footer can sit at bottom on short pages */
.main{
  min-height:100vh;
  display:flex;
  flex-direction:column;
}

/* ---------- Home hero ---------- */
.hero{
  min-height:62vh;
  background:url('../img/index-background.jpg') center/cover no-repeat fixed;
  border-bottom:1px solid var(--stroke);
}

/* ---------- Containers / cards ---------- */
.container{ width:min(1100px, 100% - 40px); margin:0 auto }
/* left-align only the About chart container */
.container-left{  margin-left: 0;  margin-right: auto;}
.section{ padding:28px 0 }
.posts-grid{ display:grid; grid-template-columns: repeat(auto-fit, minmax(240px,1fr)); gap:16px; }

.post-card,.feature-card,.anthem-card{
  background:transparent;
  border:1px dashed var(--stroke);
  border-radius:var(--r2);
  padding:14px;
  box-shadow:none;
}

/* Library cards */
.book-card{
  background: transparent;
  border: 1px dashed var(--stroke);
  border-radius: var(--r2);
  padding: 12px;
  text-align: center;          /* centers all text inside */
}

.book-card img{
  display: block;
  width: 100%;
  height: auto;
  border-radius: 10px;
  margin: 0 auto 10px;         /* centers the image in the card */
}

/* optional: tidy spacing/colors */
.book-card .author{ color: var(--ink-dim); margin: 0 0 6px; }
.book-card .blurb{ margin: 0; }

/* Title + meta */
.book-card h3{
  margin: 8px 0 6px;
  font-size: clamp(18px, 2.2vw, 22px);
  line-height: 1.25;
}
.book-card .author{
  color: var(--ink-dim);
  margin: 0 0 6px;
}

/* Center text inside book/movie/website cards */
.book-card p{
  margin: 0;
  text-align: center;
}


/* Optional: keep grid spacing tidy for library */
#library-books .posts-grid,
#library-movies .posts-grid,
#library-websites .posts-grid{
  gap: 16px;
}


/* ===== Library grids: 4-up, left-start, responsive ===== */
#library-books .posts-grid,
#library-movies .posts-grid,
#library-websites .posts-grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr); /* 4 per row on desktop */
  gap: 24px;
  justify-content: start;                /* last row starts at the left */
}

/* Responsive fallbacks */
@media (max-width: 1024px) {
  #library-books .posts-grid,
  #library-movies .posts-grid,
  #library-websites .posts-grid {
    grid-template-columns: repeat(3, 1fr);
  }
}
@media (max-width: 768px) {
  #library-books .posts-grid,
  #library-movies .posts-grid,
  #library-websites .posts-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}
@media (max-width: 480px) {
  #library-books .posts-grid,
  #library-movies .posts-grid,
  #library-websites .posts-grid {
    grid-template-columns: 1fr;
  }
}

/* Make sure headings don’t get overridden by anything else */
.book-card h3,
.book-card .author,
.book-card p { text-align: center; }



/* Post-card background image via CSS var */
.post-card{ position:relative; overflow:hidden; }
.post-card::before{
  content:""; position:absolute; inset:-1px;
  border-radius:inherit;
  background-image:var(--card-img, none);
  background-size:cover; background-position:center;
  opacity:.28; z-index:0;
}
.post-card > *{ position:relative; z-index:1; }

.card{
  background:linear-gradient(180deg,#0d1116,#0a0d11);
  border:1px dashed var(--stroke); border-radius:var(--r2); padding:14px; box-shadow:var(--shadow);
}
.post-time,.post-meta{ color:var(--ink-dim) }
.post-body p,.post-card p,.card p{ text-align:justify }


/* Post-specific: make the two cover images look like library covers */
.post-card.post-layout .post-body .img-row.as-library{
  display: flex;
  gap: 16px;
  justify-content: center;
  align-items: flex-start;
  flex-wrap: wrap;
  margin: 12px 0 16px;
}

.post-card.post-layout .post-body .img-row.as-library img{
  display: block;
  width: min(220px, 40vw);
  height: auto;
  border-radius: 10px;             /* same rounding as .book-card img */
  margin: 0 auto 10px;             /* same centering/bottom space */
  box-shadow: 0 2px 10px rgba(0,0,0,.25); /* subtle lift like cards */
}


/* Post-specific: equal-width pair for Olympiads post */
.post-card.post-layout .post-body .img-row.equal-pair{
  display: grid;
  grid-template-columns: 1fr 1fr;  /* equal widths */
  gap: 16px;
  align-items: start;
  margin: 12px 0 16px;
}

.post-card.post-layout .post-body .img-row.equal-pair img{
  width: 100%;
  height: auto;
  display: block;
  border-radius: 10px; /* optional: matches your card rounding */
}

/* Stack on narrow screens */
@media (max-width: 560px){
  .post-card.post-layout .post-body .img-row.equal-pair{
    grid-template-columns: 1fr;
  }
}


/* ---------- About (Vat-brain) ---------- */
.about-upper{
  background:url('../img/about-upper.jpg') center/cover no-repeat fixed;
  border-bottom:0;
}
.about-grid{
  display:grid; grid-template-columns:repeat(6, 1fr); grid-auto-rows: auto;
  gap:0; border:1px solid var(--stroke);
}
.about-cell{
  border-right:1px solid #2e3643;
  border-bottom:1px solid #2e3643;
  padding:16px;
  background:rgba(13,17,22,0.62);
  backdrop-filter:blur(1px);
}
.about-cell h4{ margin:0 0 10px; font-size:16px; letter-spacing:.08em }

/* Left-align text only inside the About chart panels */
.about-grid .post-body,
.about-grid .post-body p,
.about-grid .post-body li{
  text-align: left;
}

.span-1{ grid-column:span 1 } .span-2{ grid-column:span 2 } .span-3{ grid-column:span 3 }
.span-4{ grid-column:span 4 } .span-6{ grid-column:span 6 }
.tall-2{ grid-row:span 2 }

/* each side is a vertical flex stack; JS sets flex-grow per panel */
.about-col{  display:flex;  flex-direction:column;  gap:12px;}

/* panels with clearer separators that don’t look oversized */
.panel{  border-bottom:1px solid #2e3643;  padding-bottom:12px;}
.panel:last-child{ border-bottom:0; }

/* compact label/value list */
.attr-list{  display:grid;  grid-template-columns: 1fr 2fr;  gap:6px 12px;  margin:0;}
.attr-list dt{ color:var(--ink-dim); }
.attr-list dd{ margin:0; }


/* --- mini 2-column block inside the left about-cell --- */
.double-grid{
  display:grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px;
}
.double-grid .col{ padding-right:12px; border-right:1px solid #2e3643; }
.double-grid .col:last-child{ padding-right:0; border-right:0; }


/* --- mini 3-column block inside the left about-cell --- */
.triple-grid{  display:grid;  grid-template-columns:repeat(3, 1fr);  gap:12px;}
.triple-grid .col{ padding-right:12px; border-right:1px solid var(--stroke); }
.triple-grid .col:last-child{ padding-right:0; border-right:0; }


/* Notes column: fully transparent */
.notes-cell{
  background:transparent;
  border-right:1px solid transparent;
  border-bottom:1px solid transparent;
}

/* list container stays the same */
.anthem-list{
  list-style:none; margin:8px 0 10px; padding:0;
  display:flex; flex-wrap:wrap; gap:8px;
}

/* default chip (before playing) — dotted white border, no fill */
.anthem-list button{
  position: relative;
  font: inherit;
  padding: 8px 12px 8px 40px;       /* space + icon */
  border-radius: 12px;
  border: 2px dotted rgba(255,255,255,.85);
  background: transparent;
  color: var(--ink);
  cursor: pointer;
  box-shadow: 0 2px 10px rgba(0,0,0,.15);
  transition: background .2s ease, border-color .2s ease, transform .05s ease;
}

.anthem-list button:hover{
  background: rgba(255,255,255,.08);
  border-color: #fff;
}
.anthem-list button:active{ transform: translateY(1px); }

/* selected track — keep dotted border, add a subtle fill */
.anthem-list button[aria-current="true"]{
  background: rgba(255,255,255,.16);
  border-color: #ffffff;
}


/* play icon (circle + triangle) */
.anthem-list button::before{
  content:"";
  position:absolute; left:12px; top:50%; transform:translateY(-50%);
  width:18px; height:18px; border-radius:50%;
  border:1.5px solid var(--ink);
  background: transparent;
  opacity:.95;
}
.anthem-list button::after{
  content:"";
  position:absolute; left:17px; top:50%; transform:translateY(-50%);
  width:0; height:0;
  border-left:7px solid var(--ink);
  border-top:4px solid transparent;
  border-bottom:4px solid transparent;
  opacity:.95;
}
/* invert the icon when selected */
.anthem-list button[aria-current="true"]::before{ background: var(--ink); }
.anthem-list button[aria-current="true"]::after{ border-left-color: var(--bg); }

/* keyboard focus ring */
.anthem-list button:focus-visible{
  box-shadow: 0 0 0 2px rgba(255,255,255,.22);
  outline: none;
}


.anthem-audio{ width:100%; margin-top:6px }
.now-playing{ margin:8px 0 6px; font-weight:700; }


/* Full-screen banner: dimmer & centered relative to main (offset 140px for 280px sidebar) */
.about-banner{
  position:relative; height:100vh;
  background:url('../img/banner.jpg') no-repeat fixed;
  background-size:cover;
  background-position:calc(50% + 140px) center;
  -webkit-mask-image:linear-gradient(to bottom, transparent 0%, black 12%, black 88%, transparent 100%);
          mask-image:linear-gradient(to bottom, transparent 0%, black 12%, black 88%, transparent 100%);
  margin:0;
}
.about-banner::after{ content:""; position:absolute; inset:0; background:rgba(0,0,0,.38); }

/* ---- sticky footer + bottom "Back to Home" ---- */
html, body { height:100%; }
body{  min-height:100dvh;  display:flex;  flex-direction:column;}
main{
  flex:1 0 auto;
  display:flex;
  flex-direction:column;
}
footer{ margin-top:auto; }
.post-bottom-nav{ margin-top:auto; padding-top:12px; }
.back-home{ margin-top:auto }
main > footer{ margin-top:0 }


@media (max-width: 900px){

  /* Remove desktop gutter; make room above for the button */
  .layout{ padding-left: 0 !important; padding-top: 56px; }

  /* Phone hamburger (always visible & tappable) */
  .hamburger{
  position: fixed;
  left: 12px;
  top: 12px;          /* was top:auto; put it at the very top */
  bottom: auto;
  z-index: 3000;
  display: inline-flex !important;
  pointer-events: auto;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 5px;
  width: 42px; height: 42px;
  border-radius: 10px; border: 1px solid var(--stroke);
  background: rgba(18,20,24,.7);
  backdrop-filter: blur(6px);
}

  
  /* shell should not block clicks when panel is hidden */
  .sidebar{ pointer-events: none; }
  body.nav-open .sidebar{ pointer-events: auto; }
  
  .hamburger span{
    display:block; width:26px; height:3px; background:#fff; border-radius:2px;
    transition: transform .2s ease, opacity .2s ease;
  }
  body.nav-open .hamburger span:nth-child(1){ transform: translateY(6px) rotate(45deg); }
  body.nav-open .hamburger span:nth-child(2){ opacity: 0; }
  body.nav-open .hamburger span:nth-child(3){ transform: translateY(-6px) rotate(-45deg); }

  /* Slide ONLY the inner scrolling panel (keeps hamburger tappable) */
  .sidebar-panel{ transform: translateX(-100%); transition: transform .25s ease; }
  body.nav-open .sidebar-panel{ transform: translateX(0); }

  /* Lock page scroll when menu is open */
  body.nav-open{ overflow: hidden; }

  /* About page responsive tweaks */
  .about-grid{ grid-template-columns: repeat(2, 1fr); }
  .about-banner{ background-position: center; }
  .triple-grid{ grid-template-columns: 1fr; }  /* stack */
  .double-grid{ grid-template-columns: 1fr; }  /* stack */
  .about-col{ gap: 10px; }

  /* Let the about-upper background cover the top hamburger gutter on phones */
  .about-upper{
    margin-top: -56px;   /* pull the section up to “occupy” the reserved space */
    padding-top: 56px;   /* keep the title/content pushed down below the button */
  }
}


@media (min-width: 901px){ .hamburger{ display: none; } }

@media (max-width: 520px){
  .about-grid{ grid-template-columns:1fr; }
}

/* Global (site-wide) audio player */
  #global-player{
    background: rgba(12,14,18,.92);
    border: 1px dashed rgba(255,255,255,.85);
    border-radius: 14px;
    padding: 10px 10px 8px;
    width: min(420px, 90vw);
    box-shadow: 0 12px 30px rgba(0,0,0,.45);
  }
#global-player .gp-title{ font-weight: 700; margin: 0 26px 6px 0; }
#global-player audio{ width:100%; display:block; }
#global-player .gp-close{
  position: absolute;
  top: 6px;
  right: 6px;
  width: 28px;
  height: 28px;
  line-height: 1;
  background: transparent;
  color: var(--ink);
  border: 1px dotted rgba(255,255,255,.7);
  border-radius: 8px;
  cursor: pointer;
}
#global-player .gp-close:focus-visible{
  outline: 2px solid #fff;
  outline-offset: 2px;
}


/* Global full-page static overlay + top-right slider */
.entropy-overlay{
  position: fixed;
  inset: 0;
  z-index: 99999;           /* below the control, above content */
  pointer-events: none;  /* never blocks clicking the page */
  image-rendering: pixelated;
}

.entropy-control{
  position: fixed;
  top: 10px;
  right: 10px;
  z-index: 60;           /* above overlay */
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 10px;
  border-radius: 10px;
  border: 1px dashed var(--stroke);
  background: rgba(0,0,0,.35);
  backdrop-filter: blur(4px);
}

.entropy-control input[type="range"]{
  width: 220px;
}

.entropy-control output{
  font: 600 12px/1 system-ui, sans-serif;
  color: var(--ink-dim);
}

.visually-hidden{
  position:absolute !important;
  height:1px; width:1px;
  overflow:hidden; clip: rect(1px,1px,1px,1px);
  white-space:nowrap; border:0; padding:0; margin:-1px;
}

.entropy-control .entropy-title{
  font: 700 12px/1 system-ui, sans-serif;
  letter-spacing: .02em;
  opacity: .85;
  margin-right: 6px;
}

.entropy-control .toggle{
  display: inline-flex;
  align-items: center;
  gap: 6px;
  font: 12px/1 system-ui, sans-serif;
  color: var(--ink-dim);
  user-select: none;
}

/* Keep the entropy slider from sitting under the hamburger on small screens */
@media (max-width: 900px){
  .entropy-control{
    left: auto;              /* ensure it's anchored to the right only */
    right: 12px;
    max-width: min(360px, 80vw);  /* prevent spanning the whole top row */
    text-wrap: nowrap;
  }
  .entropy-control input[type="range"]{
    width: 160px;            /* narrower slider on phones */
  }
}
