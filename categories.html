<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Categories — ThoughtsInSilico</title>
  <link rel="stylesheet" href="/css/style.css" />
  <meta name="description" content="Browse posts by topic." />
</head>
<body>
  <div class="layout">
    <!-- Sidebar -->
    <aside class="sidebar" role="navigation" aria-label="Primary">
      <div class="brand">
        <div class="sig">◇</div>
        <h1 class="site-title"><a href="/" style="color:inherit;text-decoration:none;">ThoughtsInSilico</a></h1>
      </div>
      <nav>
        <h3>Pages</h3>
        <ul>
          <li><a href="/about.html">About</a></li>
          <li><a href="/categories.html" aria-current="page">Categories</a></li>
          <li><a href="/library.html">My Library</a></li>
        </ul>

        <h3>Anthems</h3>
        <div class="anthems">
          <div class="anthem-item">1. <audio controls preload="none"><source src="/audio/anthem1.mp3" type="audio/mpeg"></audio></div>
          <div class="anthem-item">2. <audio controls preload="none"><source src="/audio/anthem2.mp3" type="audio/mpeg"></audio></div>
          <div class="anthem-item">3. <audio controls preload="none"><source src="/audio/anthem3.mp3" type="audio/mpeg"></audio></div>
        </div>
      </nav>
    </aside>

    <!-- Main -->
    <main class="main">
      <section class="section">
        <h1 class="site-title" style="font-size: clamp(34px,6vw,64px);">Categories</h1>
        <hr class="hr-dots" />
        <div id="cats"></div>
      </section>
    </main>
  </div>

  <!-- Simple JS to read /posts/posts.json and render lists. -->
  <script>
    // posts.json is expected to be an array of objects like:
    // { "title": "...", "path": "/posts/some-post.html", "category": "Math" }
    fetch('/posts/posts.json')
      .then(r => r.json())
      .then(posts => {
        // group by category
        const byCat = {};
        posts.forEach(p => {
          const c = p.category || 'Misc';
          byCat[c] = byCat[c] || [];
          byCat[c].push(p);
        });

        // render
        const container = document.getElementById('cats');
        Object.keys(byCat).sort().forEach(cat => {
          const section = document.createElement('section');
          section.style.marginBottom = '22px';

          const h = document.createElement('h2');
          h.textContent = cat;
          h.style.margin = '0 0 10px';
          section.appendChild(h);

          const ul = document.createElement('ul');
          ul.style.margin = '0';
          ul.style.paddingLeft = '18px';

          byCat[cat].forEach(p => {
            const li = document.createElement('li');
            const a = document.createElement('a');
            a.href = p.path;
            a.textContent = p.title;
            li.appendChild(a);
            ul.appendChild(li);
          });

          section.appendChild(ul);
          container.appendChild(section);
        });
      })
      .catch(() => {
        document.getElementById('cats').innerHTML = '<p style="color:#b7b3ac">Could not load posts.json.</p>';
      });
  </script>
</body>
</html>
